<!doctype html>
<html class="no-js" lang="en-US">


<!-- Mirrored from htmldemo.net/jantrik/jantrik/account.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Jul 2024 04:21:11 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Account || Jantrik Bootstrap5 Template for Tools, Equipment Store</title>
    <meta name="description" content="Default Description">
    <meta name="keywords" content="E-commerce" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
   <!-- place favicon.ico in the root directory -->
   <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='img/icon/favicon.png') }}">

   <!-- Google Font css -->
   <link href="http://fonts.googleapis.com/css?family=Lily+Script+One" rel="stylesheet"> 

 <!-- mobile menu css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/meanmenu.min.css') }}">
 <!-- animate css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/animate.css') }}">
 <!-- nivo slider css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/nivo-slider.css') }}">
 <!-- owl carousel css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.carousel.min.css') }}">
 <!-- slick css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/slick.css') }}">
 <!-- price slider css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery-ui.min.css') }}">
 <!-- fontawesome css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/font-awesome.min.css') }}">
 <!-- fancybox css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.fancybox.css') }}">
 <!-- bootstrap css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
 <!-- default css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/default.css') }}">
 <!-- style css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
 <!-- responsive css -->
 <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive.css') }}">

 <!-- modernizr js -->
 <script src="{{ url_for('static', filename='js/vendor/modernizr-2.8.3.min.js') }}"></script>
 
</head>

<body>
    <!--[if lt IE 8]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <!-- Wrapper Start -->
    <div class="wrapper">
        <!-- Header Area Start -->
        <header>
            <!-- Header Top Start -->
            
            <!-- Header Top End -->
            <!-- Header Bottom Start -->
            <div class="header-bottom header-sticky">
                <div class="container">
                    <div class="row justify-content-between">
                        <!--  logo Start-->
                        <div class="col-auto">
                            <div class="logo">
                                <img src="{{ url_for('static', filename='img/logo/logo.png') }}" alt="logo-image">
                            </div>
                        </div>
                       <!--  logo End -->

                        <!--  Desktop Memu Start -->
                       
                        <!--  Desktop Memu End -->
                        
                        <!--  Cartt Box  Start -->
                        <div class="col-auto">
                            <div class="cart-box text-end">
                                <ul>
                                    <li><a href="compare.html"><i class="fa fa-cog"></i></a>
                                        <ul class="ht-dropdown">
                                            {% if 'email' in session %}
                                            <li><a href="/account">Account</a></li> 
                                            {% else %}
                                            <li><a href="/login">Login</a></li>
                                            <li><a href="/register">Register</a></li>
                                            {% endif %}                                            
                                        </ul>
                                    </li>                                    
                                    <li><a href="/wishlist"><i class="fa fa-heart-o"></i></a></li>
                                    <li><a href="/cart"><i class="fa fa-shopping-basket"></i><span class="cart-counter">2</span></a>
                                        
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!--  Cartt Box  End-->
                        <!-- Mobile Menu Start -->
                        <div class="col-sm-12 d-lg-none">
                            <div class="mobile-menu">
                                <nav>
                                    <ul>
                                        <li><a href="index.html">home</a>
                                            <!-- Home Version Dropdown Start -->
                                            <ul>
                                                <li><a href="index.html">Home Version One</a></li>
                                                <li><a href="index-2.html">Home Version Two</a></li>
                                                <li><a href="index-3.html">Home Box Layout</a></li>
                                            </ul>
                                            <!-- Home Version Dropdown End -->
                                        </li>
                                        <li><a href="shop.html">shop</a>
                                            <!-- Mobile Menu Dropdown Start -->
                                            <ul>
                                                <li><a href="product.html">Shop</a>
                                                    <ul>
                                                        <li><a href="shop.html">Product Category Name</a>
                                                            <!-- Start Three Step -->
                                                            <ul>
                                                                <li><a href="shop.html">Product Category Name</a></li>
                                                                <li><a href="shop.html">Product Category Name</a></li>
                                                                <li><a href="shop.html">Product Category Name</a></li>
                                                            </ul>
                                                        </li>
                                                        <li><a href="shop.html">Product Category Name</a></li>
                                                        <li><a href="shop.html">Product Category Name</a></li>
                                                    </ul>
                                                </li>
                                                <li><a href="product.html">product details Page</a></li>
                                                <li><a href="compare.html">Compare Page</a></li>
                                                <li><a href="cart.html">Cart Page</a></li>
                                                <li><a href="checkout.html">Checkout Page</a></li>
                                                <li><a href="wishlist.html">Wishlist Page</a></li>
                                            </ul>
                                            <!-- Mobile Menu Dropdown End -->
                                        </li>
                                        <li><a href="blog.html">Blog</a>
                                            <!-- Mobile Menu Dropdown Start -->
                                            <ul>
                                                <li><a href="blog-details.html">Blog Details Page</a></li>
                                            </ul>
                                            <!-- Mobile Menu Dropdown End -->
                                        </li>
                                        <li><a href="#">pages</a>
                                            <!-- Mobile Menu Dropdown Start -->
                                            <ul>
                                                <li><a href="login.html">login Page</a></li>
                                                <li><a href="register.html">Register Page</a></li>
                                                <li><a href="404.html">404 Page</a></li>
                                            </ul>
                                            <!-- Mobile Menu Dropdown End -->
                                        </li>
                                        <li><a href="about.html">about us</a></li>
                                        <li><a href="contact.html">contact us</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <!-- Mobile Menu  End -->                        
                    </div>
                    <!-- Row End -->
                </div>
                <!-- Container End -->
            </div>
            <!-- Header Bottom End -->
        </header>
        <!-- Header Area End -->
        <!-- Breadcrumb Start -->
        <div class="breadcrumb-area ptb-60 ptb-sm-30">
            <div class="container">
                <div class="breadcrumb">
                    <ul>
                        <li><a href="/index">Home</a></li>
                        <li class="active"><a href="/account">Account</a></li>
                    </ul>
                </div>
            </div>
            <!-- Container End -->
        </div>
        <!-- Breadcrumb End -->
        <!-- My Account Page Start Here -->
        <div class="my-account white-bg pb-60">
            <div class="container">
                <div class="account-dashboard">
                   <div class="dashboard-upper-info">
                       <div class="row no-gutters align-items-center">
                           <div class="col-lg-3 col-md-6">
                               <div class="d-single-info">
                                <p class="user-name">Hello <span>{{ user_info.name }}</span></p>         
                                <p>(not <span>{{ email }}</span>? <a href="/logout">Log Out</a>)</p>
                               </div>
                           </div>
                           <div class="col-lg-3 col-md-6">
                               
                           </div>
                           <div class="col-lg-3 col-md-6">
                               
                           </div>
                           <div class="col-lg-3 col-md-6">
                               <div class="d-single-info text-center">
                                   <a class="view-cart" href="/cart"><i class="fa fa-cart-plus" aria-hidden="true"></i>view cart</a>
                               </div>
                           </div>
                       </div>
                   </div>
                   <div class="row">
                    <div class="col-lg-2">
                        <!-- Nav tabs -->
                        <ul class="nav flex-column dashboard-list" role="tablist">
                            <li><a class="active" data-bs-toggle="tab" href="#account-details">Account details</a></li>
                            <li><a data-bs-toggle="tab" href="#orders">Orders</a></li>
                            
                            
                            <li><a data-bs-toggle="tab" href='#edit-account-details'>Edit Account details</a></li>
                            <li><a href="/logout">logout</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-10">
                        <!-- Tab panes -->
                        <div class="tab-content dashboard-content mt-all-40">
                            <div id="account-details" class="tab-pane active">
                                <h3>Account details </h3>
                                <div class="register-form login-form clearfix">
                                    <form action="#">
                                        <div class="form-group row">
                                            <label for="f-name" class="col-lg-3 col-md-4 col-form-label">Name</label>
                                            <div class="col-lg-6 col-md-8">
                                                <label>{{ user_info.name }}</label>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label for="l-name" class="col-lg-3 col-md-4 col-form-label">Address</label>
                                            <div class="col-lg-6 col-md-8">
                                                <label>{{ user_info.district }} </label>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label for="email" class="col-lg-3 col-md-4 col-form-label">Email address</label>
                                            <div class="col-lg-6 col-md-8">
                                                <label>{{ user_info.email }} </label>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label for="inputpassword" class="col-lg-3 col-md-4 col-form-label">Phone No</label>
                                            <div class="col-lg-6 col-md-8">
                                                <label>{{ user_info.phone }} </label>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div id="orders" class="tab-pane fade">
                                <h3>Orders</h3>
                                <div class="table-responsive">
                                    <table class="table">
                                        <tbody>
                                            {% for order in orders %}
                                                <tr>
                                                    <td colspan="5">
                                                        <strong>Order ID: {{ order.get('order_id', 'N/A') }}</strong><br>
                                                        Total Price: ₹{{ "%.2f"|format(order.get('order_total', 0)) }}<br>
                                                        Order Date: {{ order.get('created_at', 'N/A') }}
                                                    </td>
                                                </tr>
                                                {% for item in order.get('items', []) %}
                                                <tr>
                                                    <td>
                                                        <img src="{{ item.get('image_url', url_for('static', filename='img/default-product.jpg')) }}" 
                                                             alt="{{ item.get('product_name', 'Product') }}" width="50" height="50">
                                                    </td>
                                                    <td>
                                                        <strong>{{ item.get('product_name', 'Unknown Product') }}</strong><br>
                                                        {% if item.get('color') %}Color: {{ item.get('color') }}{% endif %}
                                                        {% if item.get('size') %}Size: {{ item.get('size') }}{% endif %}
                                                    </td>
                                                    <td>₹{{ "%.2f"|format(item.get('item_total', 0)) }}</td>
                                                    <td>
                                                        <span class="text-success">● Delivered Soon {{ order.get('delivery_date') }}</span><br>
                                                        Your item will be delivered in 7 Days
                                                    </td>
                                                    <td>
                                                        <button class="btn btn-link view-order-details" data-order-id="{{ order.get('order_id', '') }}">View Order Details</button>
                                                        <a href="{{ url_for('download_order_pdf', order_id=order.get('order_id', '')) }}" class="btn btn-primary btn-sm" target="_blank">Download Invoice</a>
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                                <tr>
                                                    <td colspan="5"><hr></td>
                                                </tr>
                                            {% else %}
                                            <tr>
                                                <td colspan="5">No orders found.</td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                          
                            <div id="edit-account-details" class="tab-pane fade">
                                <h3>Edit Account details </h3>
                                <div class="register-form login-form clearfix">
                                    <form action="{{ url_for('update_account') }}" method="POST" onsubmit="return validateForm()">
                                        <div class="form-group row">
                                            <label for="f-name" class="col-lg-3 col-md-4 col-form-label">Name</label>
                                            <div class="col-lg-6 col-md-8">
                                                <input type="text" class="form-control" id="f-name" name="name" value="{{ user_info.name }}" required oninput="validateName()">
                                                <div id="nameError" style="color: red;"></div>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label for="l-name" class="col-lg-3 col-md-4 col-form-label">Address</label>
                                            <div class="col-lg-6 col-md-8">
                                                <input type="text" class="form-control" id="l-name" name="district" value="{{ user_info.district }}" required oninput="validateDistrict()">
                                                <div id="districtError" style="color: red;"></div>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label for="phone" class="col-lg-3 col-md-4 col-form-label">Phone No</label>
                                            <div class="col-lg-6 col-md-8">
                                                <input type="tel" class="form-control" id="phone" name="phone" value="{{ user_info.phone }}" required oninput="validatePhone()">
                                                <div id="phoneError" style="color: red;"></div>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-lg-6 col-md-8">
                                                <button type="submit" class="btn btn-primary">Update</button>
                                            </div>
                                        </div>
                                    </form>
                
                                    {% with messages = get_flashed_messages(with_categories=true) %}
                                    {% if messages %}
                                        {% for category, message in messages %}
                                            <div class="alert alert-{{ category }}">
                                                {{ message }}
                                            </div>
                                        {% endfor %}
                                    {% endif %}
                                    {% endwith %}
                
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <script>
    function validateName() {
        const nameInput = document.getElementById('f-name');
        // Replace any character that is not a letter or space with an empty string
        nameInput.value = nameInput.value.replace(/[^A-Za-z\s]/g, '');

        // Display error if any invalid character is entered
        const regex = /^[A-Za-z\s]+$/;
        if (!regex.test(nameInput.value)) {
            document.getElementById('nameError').innerText = 'Name can only contain letters and spaces.';
            return false;
        } else {
            document.getElementById('nameError').innerText = '';
            return true;
        }
    }

    function validateDistrict() {
        const districtInput = document.getElementById('l-name');
        // Replace any character that is not a letter or space with an empty string
        districtInput.value = districtInput.value.replace(/[^A-Za-z\s]/g, '');

        // Display error if any invalid character is entered
        const regex = /^[A-Za-z\s]+$/;
        if (!regex.test(districtInput.value) || districtInput.value.trim() === '') {
            document.getElementById('districtError').innerText = 'Address can only contain letters and spaces.';
            return false;
        } else {
            document.getElementById('districtError').innerText = '';
            return true;
        }
    }

    function validatePhone() {
        const phoneInput = document.getElementById('phone');
        // Replace any character that is not a digit with an empty string
        phoneInput.value = phoneInput.value.replace(/[^0-9]/g, '');

        // Display error if any invalid character is entered
        const regex = /^[0-9]{10}$/;
        if (!regex.test(phoneInput.value)) {
            document.getElementById('phoneError').innerText = 'Phone number must be 10 digits.';
            return false;
        } else {
            document.getElementById('phoneError').innerText = '';
            return true;
        }
    }
</script>
                    
                </div>
            </div>
        </div>
        <!-- My Account Page End Here -->
        <!-- Brand Logo Start -->
        <div class="brand-area pb-60">
            <div class="container">
                <!-- Brand Banner Start -->
                <div class="brand-banner owl-carousel">
                    <div class="single-brand">
                        <a href="#"><img class="img" src="{{ url_for('static', filename='img/brand/1.png') }}" alt="brand-image"></a>
                    </div>
                    <div class="single-brand">
                        <a href="#"><img src="{{ url_for('static', filename='img/brand/2.png') }}" alt="brand-image"></a>
                    </div>
                    <div class="single-brand">
                        <a href="#"><img src="{{ url_for('static', filename='img/brand/3.png') }}" alt="brand-image"></a>
                    </div>
                    <div class="single-brand">
                        <a href="#"><img src="{{ url_for('static', filename='img/brand/4.png') }}" alt="brand-image"></a>
                    </div>
                    <div class="single-brand">
                        <a href="#"><img src="{{ url_for('static', filename='img/brand/5.png') }}" alt="brand-image"></a>
                    </div>
                    <div class="single-brand">
                        <a href="#"><img class="img" src="{{ url_for('static', filename='img/brand/1.png') }}" alt="brand-image"></a>
                    </div>
                    <div class="single-brand">
                        <a href="#"><img src="{{ url_for('static', filename='img/brand/2.png') }}" alt="brand-image"></a>
                    </div>
                    <div class="single-brand">
                        <a href="#"><img src="{{ url_for('static', filename='img/brand/3.png') }}" alt="brand-image"></a>
                    </div>
                    <div class="single-brand">
                        <a href="#"><img src="{{ url_for('static', filename='img/brand/4.png') }}" alt="brand-image"></a>
                    </div>
                    <div class="single-brand">
                        <a href="#"><img src="{{ url_for('static', filename='img/brand/5.png') }}" alt="brand-image"></a>
                    </div>
                </div>
                <!-- Brand Banner End -->                
            </div>
            
        </div>
        <!-- Brand Logo End -->

        <footer class="off-white-bg">
            <!-- Footer Top Start -->
            <div class="footer-top pt-50 pb-60">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-6 mr-auto ml-auto">
                            <div class="newsletter text-center">
                                <div class="main-news-desc">
                                     <div class="news-desc">
                                         <h3>Sign Up For Newsletters</h3>
                                         <p>Get e-mail updates about our latest shop and special offers.</p>
                                     </div>
                                </div>
                                <div class="newsletter-box">
                                    <form action="#">
                                        <input class="subscribe" placeholder="Enter your email address" name="email" id="subscribe" type="text">
                                        <button type="submit" class="submit">subscribe</button>
                                    </form>
                                </div>
                             </div>                            
                        </div>
                    </div>                    
                    <div class="row">
                        <!-- Single Footer Start -->
                        <div class="col-lg-4  col-md-7 col-sm-6">
                            <div class="single-footer">
                                <h3>Contact us</h3>
                                <div class="footer-content">
                                    <div class="loc-address">
                                        <span><i class="fa fa-map-marker"></i>Your address goes here.</span>
                                        <span><i class="fa fa-envelope-o"></i>Mail Us: demo@example.com</span>
                                        <span><i class="fa fa-phone"></i>Phone: 0123456789</span>
                                    </div>
                                    <div class="payment-mth"><a href="#"><img class="img" src="img/footer/1.png" alt="payment-image"></a></div>
                                </div>
                            </div>
                        </div>
                        <!-- Single Footer Start -->
                        <!-- Single Footer Start -->
                        <div class="col-lg-2  col-md-5 col-sm-6 footer-full">
                            <div class="single-footer">
                                <h3 class="footer-title">Information</h3>
                                <div class="footer-content">
                                    <ul class="footer-list">
                                        <li><a href="#">Site Map</a></li>
                                        <li><a href="#">Specials</a></li>
                                        <li><a href="#">Jobs</a></li>
                                        <li><a href="#">Delivery Information</a></li>
                                        <li><a href="#">Order History</a></li>
                                        <li><a href="#">Privacy Policy</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- Single Footer Start -->
                        <!-- Single Footer Start -->
                        <div class="col-lg-2  col-md-4 col-md-4 col-sm-6 footer-full">
                            <div class="single-footer">
                                <h3 class="footer-title">My Account</h3>
                                <div class="footer-content">
                                    <ul class="footer-list">
                                        <li><a href="account.html">My account</a></li>
                                        <li><a href="#">Checkout</a></li>
                                        <li><a href="#">Login</a></li>
                                        <li><a href="#">address</a></li>
                                        <li><a href="#">Order status</a></li>
                                        <li><a href="#">Site Map</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- Single Footer Start -->
                        <!-- Single Footer Start -->
                        <div class="col-lg-2 col-md-4 col-sm-6 footer-full">
                            <div class="single-footer">
                                <h3 class="footer-title">customer service</h3>
                                <div class="footer-content">
                                    <ul class="footer-list">
                                        <li><a href="account.html">My account</a></li>
                                        <li><a href="#">New</a></li>
                                        <li><a href="#">Gift Cards</a></li>
                                        <li><a href="#">Return Policy</a></li>
                                        <li><a href="#">Your Orders</a></li>
                                        <li><a href="#">Subway</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- Single Footer Start -->
                        <!-- Single Footer Start -->
                        <div class="col-lg-2 col-md-4 col-sm-6 footer-full">
                            <div class="single-footer">
                                <h3 class="footer-title">Let Us Help You</h3>
                                <div class="footer-content">
                                    <ul class="footer-list">
                                        <li><a href="#">Your Account</a></li>
                                        <li><a href="#">Your Orders</a></li>
                                        <li><a href="#">Shipping</a></li>
                                        <li><a href="#">Amazon Prime</a></li>
                                        <li><a href="#">Replacements</a></li>
                                        <li><a href="#">Manage </a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- Single Footer Start -->
                    </div>
                    <!-- Row End -->
                </div>
                <!-- Container End -->
            </div>
            <!-- Footer Top End -->
            <!-- Footer Bottom Start -->
            <div class="footer-bottom off-white-bg2">
                <div class="container">
                    <div class="footer-bottom-content">
                        <p class="copy-right-text">&copy; 2023 <strong> Jantrik </strong> Made with <i class="fa fa-heart text-danger"></i> by <a href="https://hasthemes.com/" target="_blank"><strong>HasThemes</strong></a></p>
                        <div class="footer-social-content">
                            <ul class="social-content-list">
                                <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                                <li><a href="#"><i class="fa fa-wifi"></i></a></li>
                                <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
                                <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                                <li><a href="#"><i class="fa fa-youtube"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Container End -->
            </div>
            <!-- Footer Bottom End -->
        </footer>
        <!-- Footer End -->
    </div>
    <!-- Wrapper End -->
    <!-- jquery 3.12.4 -->
    <script src="{{ url_for('static', filename='js/vendor/jquery-1.12.4.min.js') }}"></script>
<!-- mobile menu js  -->
<script src="{{ url_for('static', filename='js/jquery.meanmenu.min.js') }}"></script>
<!-- scroll-up js -->
<script src="{{ url_for('static', filename='js/jquery.scrollUp.js') }}"></script>
<!-- owl-carousel js -->
<script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>
<!-- slick js -->
<script src="{{ url_for('static', filename='js/slick.min.js') }}"></script>
<!-- wow js -->
<script src="{{ url_for('static', filename='js/wow.min.js') }}"></script>
<!-- price slider js -->
<script src="{{ url_for('static', filename='js/jquery-ui.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.countdown.min.js') }}"></script>
<!-- nivo slider js -->
<script src="{{ url_for('static', filename='js/jquery.nivo.slider.js') }}"></script>
<!-- fancybox js -->
<script src="{{ url_for('static', filename='js/jquery.fancybox.min.js') }}"></script>
<!-- bootstrap -->
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
<!-- plugins -->
<script src="{{ url_for('static', filename='js/plugins.js') }}"></script>
<!-- main js -->
<script src="{{ url_for('static', filename='js/main.js') }}"></script>

<link rel="stylesheet" href="http://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Modal for Order Details -->
<div class="modal fade" id="orderDetailsModal" tabindex="-1" role="dialog" aria-labelledby="orderDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="orderDetailsModalLabel">Order Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="orderDetailsContent">
                <!-- Order details will be inserted here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const viewOrderButtons = document.querySelectorAll('.view-order-details');
    const orderDetailsContent = document.getElementById('orderDetailsContent');
    const orderDetailsModal = document.getElementById('orderDetailsModal');

    if (!orderDetailsContent || !orderDetailsModal) {
        console.error('Required modal elements not found');
        return;
    }

    // Initialize the modal
    $(orderDetailsModal).modal({
        show: false,
        backdrop: 'static',
        keyboard: false
    });

    viewOrderButtons.forEach(button => {
        button.addEventListener('click', function() {
            const orderId = this.getAttribute('data-order-id');
            fetch(`/order/${orderId}`)
                .then(response => response.json())
                .then(data => {
                    console.log('Received data:', data);
                    if (data.success && data.order) {
                        const order = data.order;
                        console.log('Order details:', order);
                        try {
                            let modalContent = `
                                <p><strong>Order ID:</strong> ${order.order_id || 'N/A'}</p>
                                <p><strong>Order Date:</strong> ${order.created_at || 'N/A'}</p>
                                <p><strong>Status:</strong> ${order.status || 'N/A'}</p>
                                <p><strong>Shipping Address:</strong> ${order.shipping_address || 'N/A'}</p>
                                <p><strong>Total:</strong> ₹${(order.order_total || 0).toFixed(2)}</p>
                                <h6>Items:</h6>
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Product</th>
                                            <th>Quantity</th>
                                            <th>Rent From</th>
                                            <th>Rent To</th>
                                            <th>Days</th>
                                            <th>Price</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                            `;
                            if (Array.isArray(order.items)) {
                                order.items.forEach(item => {
                                    modalContent += `
                                        <tr>
                                            <td>${item.product_name || 'N/A'}</td>
                                            <td>${item.quantity || 'N/A'}</td>
                                            <td>${item.rent_from || 'N/A'}</td>
                                            <td>${item.rent_to || 'N/A'}</td>
                                            <td>${item.rental_days || 'N/A'}</td>
                                            <td>₹${(item.item_total || 0).toFixed(2)}</td>
                                        </tr>
                                    `;
                                });
                            } else {
                                console.error('order.items is not an array:', order.items);
                            }
                            modalContent += `
                                    </tbody>
                                </table>
                            `;
                            orderDetailsContent.innerHTML = modalContent;
                            $(orderDetailsModal).modal('show');
                        } catch (error) {
                            console.error('Error populating modal:', error);
                        }
                    } else {
                        console.error('Failed to fetch order details:', data);
                        alert('Failed to fetch order details');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred while fetching order details');
                });
        });
    });

    // Handle modal close button
    const closeButtons = orderDetailsModal.querySelectorAll('[data-dismiss="modal"]');
    closeButtons.forEach(button => {
        button.addEventListener('click', function() {
            $(orderDetailsModal).modal('hide');
        });
    });
});
</script>

</body>


<!-- Mirrored from htmldemo.net/jantrik/jantrik/account.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Jul 2024 04:21:12 GMT -->
</html>