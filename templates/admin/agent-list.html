<!DOCTYPE html>
<html lang="en" dir="ltr">


<!-- Mirrored from andit.co/projects/html/andshop/andshop-dashboard/vendor-list.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 25 Feb 2023 08:14:16 GMT -->
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="Andshop - Admin Dashboard HTML Template.">

	<title>Andshop - Admin Dashboard HTML Template.</title>

	<!-- GOOGLE FONTS -->
	<link rel="preconnect" href="https://fonts.googleapis.com/">
	<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700;800&amp;family=Poppins:wght@300;400;500;600;700;800;900&amp;family=Roboto:wght@400;500;700;900&amp;display=swap" rel="stylesheet">

	<link href="{{ url_for('static', filename='assets/css/materialdesignicons.min.css') }}" rel="stylesheet" />

	<!-- PLUGINS CSS STYLE -->
	<link href="{{ url_for('static', filename='assets/plugins/simplebar/simplebar.css') }}" rel="stylesheet" />	

	<!-- Data Tables -->
	<link href="{{ url_for('static', filename='assets/plugins/data-tables/datatables.bootstrap5.min.css') }}" rel='stylesheet'>
	<link href="{{ url_for('static', filename='assets/plugins/data-tables/responsive.datatables.min.css') }}" rel='stylesheet'>

	<!-- custom css -->
	<link id="style.css" rel="stylesheet" href="{{ url_for('static', filename='assets/css/style.css') }}" />

	<!-- FAVICON -->
	<link href="{{ url_for('static', filename='assets/img/favicon.png') }}" rel="shortcut icon" />
</head>

<body class="ec-header-fixed ec-sidebar-fixed ec-sidebar-dark ec-header-light" id="body">

	<!-- WRAPPER -->
	<div class="wrapper">

		<!-- LEFT MAIN SIDEBAR -->
		<div class="ec-left-sidebar ec-bg-sidebar">
			<div id="sidebar" class="sidebar ec-sidebar-footer">

				<div class="ec-brand">
					<a href="/admin_dashboard">
						<img class="ec-brand-icon" src="{{ url_for('static', filename='assets/img/logo/favicon.png') }}" alt="" />
						<span class="ec-brand-name text-truncate">ANDSHOP</span>
					</a>
				</div>

				<!-- begin sidebar scrollbar -->
				<div class="ec-navigation" data-simplebar>
					<!-- sidebar menu -->
					<ul class="nav sidebar-inner" id="sidebar-menu">
						<!-- Dashboard -->
						<li class="active">
							<a class="sidenav-item-link" href="/admin_dashboard">
								<i class="mdi mdi-view-dashboard-outline"></i>
								<span class="nav-text">Dashboard</span>
							</a>
							<hr>
						</li>

						<!-- Vendors -->
						<li class="has-sub">
							<a class="sidenav-item-link" href="javascript:void(0)">
								<i class="mdi mdi-briefcase-outline"></i>
								<span class="nav-text">Vendors</span> <b class="caret"></b>
							</a>
							<div class="collapse">
								<ul class="sub-menu" id="vendors" data-parent="#sidebar-menu">
									

									<li class="">
										<a class="sidenav-item-link" href="/vendor-list">
											<span class="nav-text">Vendor List</span>
										</a>
									</li>
									
									</li>
									<li class="">
										<a class="sidenav-item-link" href="/vendor-accept">
											<span class="nav-text">Accept Vendors</span>
										</a>
									</li>
									
								</ul>
							</div>
						</li>

						<!-- Users -->
						

						<!-- Category -->
						<li class="has-sub">
							<a class="sidenav-item-link" href="javascript:void(0)">
								<i class="mdi mdi-shape"></i>
								<span class="nav-text">Categories</span> <b class="caret"></b>
							</a>
							<div class="collapse">
								<ul class="sub-menu" id="categorys" data-parent="#sidebar-menu">
									<li class="">
										<a class="sidenav-item-link" href="/main-category">
											<span class="nav-text">All Category</span>
										</a>
									</li>
									<li class="">
										<a class="sidenav-item-link" href="/add-category">
											<span class="nav-text">Add Category</span>
										</a>
									</li>
								</ul>
							</div>
						</li>

						

						
					</ul>
				</div>
			</div>
		</div>

		<!-- PAGE WRAPPER -->
		<div class="ec-page-wrapper">

			<!-- Header -->
			<header class="ec-main-header" id="header">
				<nav class="navbar navbar-static-top navbar-expand-lg">
					<!-- Sidebar toggle button -->
					<button id="sidebar-toggler">
						<img src="{{ url_for('static', filename='assets/img/icons/clops.png') }}" alt="">
					</button>
					<!-- search form -->
					<div class="search-form d-lg-inline-block">
						<div class="input-group">
							<input type="text" name="query" id="search-input" class="form-control"
								placeholder="search.." autofocus autocomplete="off" />
							<button type="button" name="search" id="search-btn" class="btn btn-flat">
								<i class="mdi mdi-magnify"></i>
							</button>
						</div>
						<div id="search-results-container">
							<ul id="search-results"></ul>
						</div>
					</div>

					<!-- navbar right -->
					<div class="navbar-right">
						<ul class="nav navbar-nav">
							<!-- User Account -->
							<li class="dropdown user-menu">
								<button class="dropdown-toggle nav-link ec-drop" data-bs-toggle="dropdown"
									aria-expanded="false">
									<img src="{{ url_for('static', filename='assets/img/user/user-2.png') }}" class="user-image" alt="User Image" />
								</button>
								<ul class="dropdown-menu dropdown-menu-right ec-dropdown-menu">
									<!-- User image -->
									<li class="dropdown-header">
										<div class="d-inline-block">
											<h5>{{ user_info.name }}</h5>
											<p class="pt-2">{{ user_info.email }}</p>
										</div>
									</li>
									<li class="dropdown-footer">
										<a href="{{ url_for('logout') }}"> <i class="mdi mdi-logout"></i> Log Out </a>
									</li>
								</ul>
							</li>
							
						</ul>
					</div>
				</nav>
			</header>

			<!-- CONTENT WRAPPER -->
			<div class="ec-content-wrapper">
				<div class="content">
					<div class="breadcrumb-wrapper d-flex align-items-center justify-content-between">
						<div>
							<h1>Delivery Agents</h1>
							<p class="breadcrumbs">
								<span><a href="/admin_dashboard">Home</a></span>
								<span><i class="mdi mdi-chevron-right"></i></span>Delivery Agents
							</p>
						</div>
						<div>
							<a href="/agent-add" class="btn btn-primary">Add Agent</a>
						</div>
					</div>

					<div class="row">
						<div class="col-12">
							<div class="card card-default">
								<div class="card-body">
									<div class="table-responsive">
										<table id="responsive-data-table" class="table" style="width:100%">
											<thead>
												<tr>
													<th>Profile</th>
													<th>Name</th>
													<th>Email</th>
													<th>Phone</th>
													<th>District</th>
													<th>Registration Date</th>
													<th>Status</th>
													<th>Action</th>
												</tr>
											</thead>

											<tbody>
												{% for agent_id, agent in agents.items() %}
												<tr>
													<td>
														{% if agent.profile_pic %}
														<img class="vendor-thumb rounded-circle" 
															 src="{{ url_for('static', filename=agent.profile_pic) }}" 
															 alt="agent profile"
															 style="width: 50px; height: 50px; object-fit: cover;">
														{% else %}
														<img class="vendor-thumb rounded-circle" 
															 src="{{ url_for('static', filename='assets/img/user/user.png') }}" 
															 alt="default profile"
															 style="width: 50px; height: 50px; object-fit: cover;">
														{% endif %}
													</td>
													<td>{{ agent.name }}</td>
													<td>{{ agent.email }}</td>
													<td>{{ agent.phone }}</td>
													<td>{{ agent.district }}</td>
													<td>{{ agent.registration_date }}</td>
													<td>
														{% if agent.status == 'active' %}
														<span class="badge badge-success">Active</span>
														{% else %}
														<span class="badge badge-danger">Inactive</span>
														{% endif %}
													</td>
													<td>
														<div class="btn-group mb-1">
															<button type="button" class="btn btn-outline-success">Info</button>
															<button type="button" class="btn btn-outline-success dropdown-toggle dropdown-toggle-split" 
																	data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static">
																<span class="sr-only">Info</span>
															</button>
															<div class="dropdown-menu">
																<a class="dropdown-item" href="/edit-agent/{{ agent_id }}">Edit</a>
																{% if agent.status == 'active' %}
																<a class="dropdown-item" href="#" onclick="updateAgentStatus('{{ agent_id }}', 'inactive')">Deactivate</a>
																{% else %}
																<a class="dropdown-item" href="#" onclick="updateAgentStatus('{{ agent_id }}', 'active')">Activate</a>
																{% endif %}
																<a class="dropdown-item" href="#" onclick="deleteAgent('{{ agent_id }}')">Delete</a>
															</div>
														</div>
													</td>
												</tr>
												{% endfor %}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Footer -->
			<footer class="footer mt-auto">
				<div class="copyright bg-white">
					<p>
						Copyright Â© 2023. All right reserved.
					  </p>
				</div>
			</footer>

		</div> <!-- End Page Wrapper -->

	</div> <!-- End Wrapper -->

	<!-- Common Javascript -->
	<script src="{{ url_for('static', filename='assets/plugins/jquery/jquery-3.5.1.min.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/js/bootstrap.bundle.min.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/plugins/simplebar/simplebar.min.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/plugins/jquery-zoom/jquery.zoom.min.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/plugins/slick/slick.min.js') }}"></script>

	<!-- Data Tables -->
	<script src="{{ url_for('static', filename='assets/plugins/data-tables/jquery.datatables.min.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/plugins/data-tables/datatables.bootstrap5.min.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/plugins/data-tables/datatables.responsive.min.js') }}"></script>

	<!-- Option Switcher -->
	<script src="{{ url_for('static', filename='assets/plugins/options-sidebar/optionswitcher.js') }}"></script>

	<!-- custom js -->
	<script src="{{ url_for('static', filename='assets/js/custom.js') }}"></script>

	<script>
	function deleteAgent(agentId) {
		if (confirm('Are you sure you want to delete this agent?')) {
			fetch(`/delete-agent/${agentId}`, {
				method: 'DELETE',
				headers: {
					'Content-Type': 'application/json',
				}
			})
			.then(response => response.json())
			.then(data => {
				if (data.success) {
					alert('Agent deleted successfully');
					location.reload();
				} else {
					alert(data.message || 'Error deleting agent');
				}
			})
			.catch(error => {
				console.error('Error:', error);
				alert('Error deleting agent');
			});
		}
	}

	function updateAgentStatus(agentId, newStatus) {
		if (confirm(`Are you sure you want to ${newStatus === 'active' ? 'activate' : 'deactivate'} this agent?`)) {
			fetch(`/update-agent-status/${agentId}`, {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify({
					status: newStatus
				})
			})
			.then(response => response.json())
			.then(data => {
				if (data.success) {
					alert(`Agent ${newStatus === 'active' ? 'activated' : 'deactivated'} successfully`);
					location.reload();
				} else {
					alert(data.message || 'Error updating agent status');
				}
			})
			.catch(error => {
				console.error('Error:', error);
				alert('Error updating agent status');
			});
		}
	}
	</script>
</body>


<!-- Mirrored from andit.co/projects/html/andshop/andshop-dashboard/vendor-list.php by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 25 Feb 2023 08:14:19 GMT -->
</html>
