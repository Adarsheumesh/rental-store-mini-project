<!DOCTYPE html>
<html lang="en" dir="ltr">


<!-- Mirrored from andit.co/projects/html/andshop/andshop-dashboard//vendor_dashboard by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 25 Feb 2023 08:13:36 GMT -->
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="Andshop - Admin Dashboard HTML Template.">

	<title>Andshop - Admin Dashboard HTML Template.</title>

	<!-- GOOGLE FONTS -->
	<link rel="preconnect" href="https://fonts.googleapis.com/">
	<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
	<link rel="preconnect" href="https://fonts.googleapis.com/">
	<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel="stylesheet">
	<link href="{{ url_for('static', filename='assets/css/materialdesignicons.min.css') }}" rel="stylesheet" />

	<!-- PLUGINS CSS STYLE -->
	<link href="{{ url_for('static', filename='assets/plugins/daterangepicker/daterangepicker.css') }}" rel="stylesheet">
	<link href="{{ url_for('static', filename='assets/plugins/simplebar/simplebar.css') }}" rel="stylesheet">

	<!-- custom css -->
	<link id="style.css" href="{{ url_for('static', filename='assets/css/style.css') }}" rel="stylesheet" />


	<!-- FAVICON -->
	<link rel="icon" href="{{ url_for('static', filename='images/favicon.png') }}" type="image/png">
	<script type="text/javascript">
		window.addEventListener('pageshow', function(event) {
			if (event.persisted) {
				// If the page is loaded from the cache, reload it
				window.location.reload();
			}
		});
	</script>
	
</head>


<body class="ec-header-fixed ec-sidebar-fixed ec-sidebar-light ec-header-light" id="body">

	<!--  WRAPPER  -->
	<div class="wrapper">
		
		<!-- LEFT MAIN SIDEBAR -->
		<div class="ec-left-sidebar ec-bg-sidebar">
			<div id="sidebar" class="sidebar ec-sidebar-footer">

				<div class="ec-brand">
					<a href="/vendor_dashboard">
						<img class="ec-brand-icon" src="assets/img/logo/favicon.png" alt="" />
						<span class="ec-brand-name text-truncate">ANDSHOP</span>
					</a>
				</div>
				<!-- begin sidebar scrollbar -->
				<div class="ec-navigation" data-simplebar>
					<!-- sidebar menu -->
					<ul class="nav sidebar-inner" id="sidebar-menu">
						<!-- Dashboard -->
						<li class="active">
							<a class="sidenav-item-link" href="/vendor_dashboard">
								<i class="mdi mdi-view-dashboard-outline"></i>
								<span class="nav-text">Dashboard</span>
							</a>
							<hr>
						</li>
						<!-- Users -->
						<li class="has-sub">
							<a class="sidenav-item-link" href="javascript:void(0)">
								<i class="mdi mdi-account-multiple-outline"></i>
								<span class="nav-text">Customers</span> <b class="caret"></b>
							</a>
							<div class="collapse">
								<ul class="sub-menu" id="users" data-parent="#sidebar-menu">

									<li class="">
										<a class="sidenav-item-link" href='/user-list'>
											<span class="nav-text">User List</span>
										</a>
									</li>
								</ul>
							</div>
							<hr>
						</li>
						<!-- Products -->
						<li class="has-sub">
							<a class="sidenav-item-link" href="javascript:void(0)">
								<!-- <i class="mdi mdi-palette-advanced"></i> -->
								<i class="mdi mdi-package-variant-closed"></i>
								<span class="nav-text">Products</span> <b class="caret"></b>
							</a>
							<div class="collapse">
								<ul class="sub-menu" id="products" data-parent="#sidebar-menu">
									<li class="">
										<a class="sidenav-item-link" href="/product-add">
											<span class="nav-text">Add Product</span>
										</a>										
									</li>
									<li class="">
										<a class="sidenav-item-link" href="/products">
											<span class="nav-text">List Product</span>
										</a>
									</li>
								</ul>
							</div>
						</li>

						<!-- Orders -->
						<li class="has-sub">
							<a class="sidenav-item-link" href="javascript:void(0)">
								<i class="mdi mdi-cart-outline"></i>
								<span class="nav-text">Orders</span> <b class="caret"></b>
							</a>
							<div class="collapse">
								<ul class="sub-menu" id="orders" data-parent="#sidebar-menu">
									<li class="">
										<a class="sidenav-item-link" href="/new-order">
											<span class="nav-text">Order list</span>
										</a>
									</li>
								</ul>
							</div>
						</li>
						<!-- Error page -->
						<li>
							<a class="sidenav-item-link" href="/analysis">
								<i class="mdi mdi-finance"></i>
								<span class="nav-text">Product Analysis page</span>
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>

		<!--  PAGE WRAPPER -->
		<div class="ec-page-wrapper">

			<!-- Header -->
			<header class="ec-main-header" id="header">
				<nav class="navbar navbar-static-top navbar-expand-lg">
					<!-- Sidebar toggle button -->
					<button id="sidebar-toggler">
						<img src="assets/img/icons/clops.png" alt="">
					</button>
					<!-- search form -->
					<div class="search-form d-lg-inline-block">
						<div class="input-group">
							<input type="text" name="query" id="search-input" class="form-control"
								placeholder="search.." autofocus autocomplete="off" />
							<button type="button" name="search" id="search-btn" class="btn btn-flat">
								<i class="mdi mdi-magnify"></i>
							</button>
						</div>
						<div id="search-results-container">
							<ul id="search-results"></ul>
						</div>
					</div>

					<!-- navbar right -->
					<div class="navbar-right">
						<ul class="nav navbar-nav">
							<!-- User Account -->
							<li class="dropdown user-menu">
								<button class="dropdown-toggle nav-link ec-drop" data-bs-toggle="dropdown"
									aria-expanded="false">
									<img src="static/{{ user_info.profile_pic }}" class="user-image" alt="User Image" />
								</button>
								<ul class="dropdown-menu dropdown-menu-right ec-dropdown-menu">
									<!-- User image -->
									<li class="dropdown-header">
										<div class="d-inline-block">
											<h5>{{ user_info.name }}</h5>
											<p class="pt-2">{{ user_info.email }}</p>
										</div>
									</li>
									<li>
										<a href='/user-profile'>
											<i class="mdi mdi-account"></i> My Profile
										</a>
									</li>
									<li class="dropdown-footer">
										<a href="/logout"> <i class="mdi mdi-logout"></i> Log Out </a>
									</li>
								</ul>
							</li>
							<li class="dropdown notifications-menu custom-dropdown">
								<button class="dropdown-toggle notify-toggler custom-dropdown-toggler">
									<i class="mdi mdi-bell-ring-outline"></i>
									<span class="badge badge-pill badge-primary">0</span>
								</button>

								<div class="card card-default dropdown-notify dropdown-menu-right mb-0">
									<div class="card-header card-header-border-bottom px-3">
										<h2>Notifications</h2>
									</div>

									<div class="card-body px-0 py-0">
										<div class="tab-content" id="myNotifications">
											<ul class="list-unstyled" data-simplebar style="height: 360px">
												<!-- Notifications will be dynamically inserted here -->
											</ul>
										</div>
									</div>
								</div>

								<ul class="dropdown-menu dropdown-menu-right d-none">
									<li class="dropdown-header">You have 5 notifications</li>
									<li>
										<a href="#">
											<i class="mdi mdi-account-plus"></i> New user registered
											<span class=" font-size-12 d-inline-block float-right"><i
													class="mdi mdi-clock-outline"></i> 10 AM</span>
										</a>
									</li>
									<li>
										<a href="#">
											<i class="mdi mdi-account-remove"></i> User deleted
											<span class=" font-size-12 d-inline-block float-right"><i
													class="mdi mdi-clock-outline"></i> 07 AM</span>
										</a>
									</li>
									<li>
										<a href="#">
											<i class="mdi mdi-chart-areaspline"></i> Sales report is ready
											<span class=" font-size-12 d-inline-block float-right"><i
													class="mdi mdi-clock-outline"></i> 12 PM</span>
										</a>
									</li>
									<li>
										<a href="#">
											<i class="mdi mdi-account-supervisor"></i> New client
											<span class=" font-size-12 d-inline-block float-right"><i
													class="mdi mdi-clock-outline"></i> 10 AM</span>
										</a>
									</li>
									<li>
										<a href="#">
											<i class="mdi mdi-server-network-off"></i> Server overloaded
											<span class=" font-size-12 d-inline-block float-right"><i
													class="mdi mdi-clock-outline"></i> 05 AM</span>
										</a>
									</li>
									<li class="dropdown-footer">
										<a class="text-center" href="#"> View All </a>
									</li>
								</ul>
							</li>
						</ul>
					</div>
				</nav>
			</header>

			<!-- CONTENT WRAPPER -->
			<div class="ec-content-wrapper">
				<div class="content">
					<!-- Top Statistics -->
					<div class="row">
						<div class="col-xl-3 col-sm-6 p-b-15 lbl-card">
							<div class="card card-mini dash-card card-1">
								<div class="card-body">
									<h2 class="mb-1">{{ customer_count|default('N/A') }}</h2>
									<p>Daily Signups</p>
									<span class="mdi mdi-account-arrow-left"></span>
								</div>
							</div>
						</div>
						
						<div class="col-xl-3 col-sm-6 p-b-15 lbl-card">
							<div class="card card-mini dash-card card-3">
								<div class="card-body">
									<h2 class="mb-1">{{ total_orders }}</h2>
									<p>Daily Order</p>
									<span class="mdi mdi-package-variant"></span>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-sm-6 p-b-15 lbl-card">
							<div class="card card-mini dash-card card-4">
								<div class="card-body">
									<h2 class="mb-1">{{ total_revenue }}</h2>
									<p>Daily Revenue</p>
									<span class="mdi mdi-currency-usd"></span>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-xl-8 col-md-12 p-b-15">
							<!-- Sales Graph -->
							<div class="card card-default">
								<div class="card-header d-flex justify-content-between align-items-center">
									<h2>Monthly Sales Report</h2>
									<div class="d-flex gap-2">
										<select class="form-select" id="monthSelect" style="width: 140px;">
											<option value="all">All Months</option>
											<option value="1">January</option>
											<option value="2">February</option>
											<option value="3">March</option>
											<option value="4">April</option>
											<option value="5">May</option>
											<option value="6">June</option>
											<option value="7">July</option>
											<option value="8">August</option>
											<option value="9">September</option>
											<option value="10">October</option>
											<option value="11">November</option>
											<option value="12">December</option>
										</select>
										<select class="form-select" id="yearSelect" style="width: 100px;">
										</select>
									</div>
								</div>
								<div class="card-body">
									<canvas id="monthlySalesChart" style="height: 400px; width: 100%;"></canvas>
								</div>
							</div>
						</div>

						<div class="col-xl-4 col-md-12 p-b-15">
							<!-- Doughnut Chart -->
							<div class="card card-default">
								<div class="card-header justify-content-center">
									<h2>Orders Overview</h2>
								</div>
								<div class="card-body">
									<canvas id="polar"></canvas>
								</div>
								<a href="/download-report" class="pb-5 d-block text-center text-muted">
									<i class="mdi mdi-download mr-2"></i> Download overall report
								</a>
							</div>
						</div>
					</div>
					

					

					<div class="row">
						<div class="col-12 p-b-15">
							<!-- Recent Order Table -->
							<div class="card card-table-border-none card-default recent-orders" id="recent-orders">
								<div class="card-header justify-content-between">
									<h2>Recent Orders</h2>
									<div class="date-range-report">
										<span></span>
									</div>
								</div>
								<div class="card-body pt-0 pb-5">
									<table class="table card-table table-responsive table-responsive-large"
										style="width:100%">
										<thead>
											<tr>
												<th>Order ID</th>
												<th>Photo</th>
												<th>Product Name</th>
												<th class="d-none d-lg-table-cell">Units</th>
												<th class="d-none d-lg-table-cell">Order Date</th>
												<th class="d-none d-lg-table-cell">Order Cost</th>
												<th>Status</th>
												<th></th>
											</tr>
										</thead>
										<tbody>
											{% for order in recent_orders %}
											<tr>
												<td>{{ order.order_id }}</td>
												<td>
													<a class="text-dark" href="#"><img class="vendor-thumb" src="{{ order.product_image }}" alt="product image" style="width: 45px; height: 45px;"></a>
												</td>
												<td>
													<a class="text-dark" href="#">{{ order.product_name }}</a>
												</td>
												<td class="d-none d-lg-table-cell">{{ order.quantity }} Unit</td>
												<td class="d-none d-lg-table-cell">{{ order.order_date }}</td>
												<td class="d-none d-lg-table-cell">{{ order.order_cost }}</td>
												<td>
													<span class="badge badge-{{ 'success' if order.status == 'Completed' else 'warning' }}">{{ order.status }}</span>
												</td>
												<td class="text-right">
													<div class="dropdown show d-inline-block widget-dropdown">
														<a class="dropdown-toggle icon-burger-mini" href="#"
															role="button" id="dropdown-recent-order{{ loop.index }}"
															data-bs-toggle="dropdown" aria-haspopup="true"
															aria-expanded="false" data-display="static"></a>
														<ul class="dropdown-menu dropdown-menu-right">
															<li class="dropdown-item">
																<a href="{{ url_for('order_details', order_id=order.order_id) }}">View</a>
															</li>
															<li class="dropdown-item">
																<a href="#">Remove</a>
															</li>
														</ul>
													</div>
												</td>
											</tr>
											{% endfor %}
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>

				</div> <!-- End Content -->
			</div> <!-- End Content Wrapper -->

			<!-- Footer -->
			<footer class="footer mt-auto">
				<div class="copyright bg-white">
					<p>
						Copyright Â© 2023. All right reserved.
					</p>
				</div>
			</footer>

		</div> <!-- End Page Wrapper -->
	</div> <!-- End Wrapper -->

	<!-- Common Javascript -->
	<script src="{{ url_for('static', filename='assets/plugins/jquery/jquery-3.5.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/plugins/simplebar/simplebar.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/plugins/jquery-zoom/jquery.zoom.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/plugins/slick/slick.min.js') }}"></script>

	<!-- Chart -->
	<script src="{{ url_for('static', filename='assets/plugins/charts/Chart.min.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/js/chart.js') }}"></script>

	<!-- Google map chart -->
	<script src="{{ url_for('static', filename='assets/plugins/charts/google-map-loader.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/plugins/charts/google-map.js') }}"></script>

	<!-- Date Range Picker -->
	<script src="{{ url_for('static', filename='assets/plugins/daterangepicker/moment.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/plugins/daterangepicker/daterangepicker.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/js/date-range.js') }}"></script>
	<!-- custom js -->
	<script src="{{ url_for('static', filename='assets/js/custom.js') }}"></script>

	<script>
	function fetchAndDisplayNotifications() {
		$.ajax({
			url: '/get-low-stock-notifications',
			method: 'GET',
			success: function(notifications) {
				var notificationList = $('#myNotifications ul');
				notificationList.empty();  // Clear existing notifications
				
				notifications.forEach(function(notification) {
					var notificationHtml = `
						<li>
							<a href="javascript:void(0)" class="media media-message media-notification">
								<div class="media-body d-flex justify-content-between">
									<div class="message-contents">
										<h4 class="title">${notification.product_name}</h4>
										<p class="last-msg">${notification.message}</p>
										<p class="last-msg">Store: ${notification.store_name}</p>
										<span class="font-size-12 font-weight-medium text-secondary">
											<i class="mdi mdi-clock-outline"></i> Just now
										</span>
									</div>
								</div>
							</a>
						</li>
					`;
					notificationList.append(notificationHtml);
				});
				
				// Update notification count
				$('.notify-toggler').find('.badge').text(notifications.length);
			},
			error: function(error) {
				console.error('Error fetching notifications:', error);
			}
		});
	}

	// Call this function when the page loads
	$(document).ready(function() {
		fetchAndDisplayNotifications();
		
		// Optionally, set up a timer to periodically fetch notifications
		setInterval(fetchAndDisplayNotifications, 300000);  // Every 5 minutes
	});
	</script>

	<script>
	document.addEventListener('DOMContentLoaded', function() {
		let salesChart = null;
		
		// Populate year select with last 5 years
		const yearSelect = document.getElementById('yearSelect');
		const currentYear = new Date().getFullYear();
		for (let year = currentYear; year >= currentYear - 4; year--) {
			const option = document.createElement('option');
			option.value = year;
			option.textContent = year;
			yearSelect.appendChild(option);
		}

		function createChart(data) {
			if (salesChart) {
				salesChart.destroy();
			}

			const ctx = document.getElementById('monthlySalesChart').getContext('2d');
			salesChart = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: data.labels,
					datasets: [{
						label: 'Monthly Sales',
						data: data.values,
						backgroundColor: 'rgba(62, 128, 246, 0.8)',
						borderColor: 'rgba(62, 128, 246, 1)',
						borderWidth: 1,
						borderRadius: 5,
						barThickness: 25
					}]
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					plugins: {
						legend: {
							display: false
						},
						tooltip: {
							backgroundColor: 'rgba(255, 255, 255, 0.9)',
							titleColor: '#000',
							bodyColor: '#000',
							borderColor: '#e0e6ed',
							borderWidth: 1,
							padding: 10,
							callbacks: {
								label: function(context) {
									return `Revenue: $${context.parsed.y.toLocaleString()}`;
								}
							}
						}
					},
					scales: {
						y: {
							beginAtZero: true,
							grid: {
								borderDash: [2, 2]
							},
							ticks: {
								callback: function(value) {
									if (value >= 1000) {
										return `$${value/1000}k`;
									}
									return `$${value}`;
								}
							}
						},
						x: {
							grid: {
								display: false
							}
						}
					}
				}
			});
		}

		function fetchSalesData() {
			const month = document.getElementById('monthSelect').value;
			const year = document.getElementById('yearSelect').value;
			
			fetch(`/get-monthly-sales?month=${month}&year=${year}`)
				.then(response => response.json())
				.then(data => {
					createChart(data);
				})
				.catch(error => console.error('Error loading sales data:', error));
		}

		// Event listeners for selects
		document.getElementById('monthSelect').addEventListener('change', fetchSalesData);
		document.getElementById('yearSelect').addEventListener('change', fetchSalesData);

		// Initial load
		fetchSalesData();
	});
	</script>

	<script>
	document.addEventListener('DOMContentLoaded', function() {
			fetch('/get-order-status-counts')
				.then(response => response.json())
				.then(data => {
					const ctx = document.getElementById('polar').getContext('2d');
					new Chart(ctx, {
						type: 'doughnut',
						data: {
							labels: ['Ordered', 'Delivered', 'Returned', 'Cancelled'],
							datasets: [{
								data: [
									data.ordered || 0,
									data.delivered || 0,
									data.returned || 0,
									data.cancelled || 0
								],
								backgroundColor: [
									'#3E80F6',   // Blue for Ordered
									'#20D489',   // Green for Delivered
									'#FFBA4B',   // Orange for Returned
									'#F85778'    // Red for Cancelled
								],
								borderWidth: 0,
								cutout: '75%'    // Makes the doughnut thinner
							}]
						},
						options: {
							responsive: true,
							maintainAspectRatio: false,
							plugins: {
								legend: {
									position: 'right',
									labels: {
										padding: 20,
										usePointStyle: true,
										font: {
											size: 12
										}
									}
								},
								tooltip: {
									backgroundColor: 'rgba(255, 255, 255, 0.9)',
									titleColor: '#000',
									bodyColor: '#000',
									borderColor: '#e0e6ed',
									borderWidth: 1,
									padding: 10,
									callbacks: {
										label: function(context) {
											const label = context.label || '';
											const value = context.raw || 0;
											const total = context.dataset.data.reduce((a, b) => a + b, 0);
											const percentage = ((value / total) * 100).toFixed(1);
											return `${label}: ${value} (${percentage}%)`;
										}
									}
								}
							}
						}
					});
				})
				.catch(error => console.error('Error loading order status data:', error));
	});
	</script>

</body>


<!-- Mirrored from andit.co/projects/html/andshop/andshop-dashboard//vendor_dashboard by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 25 Feb 2023 08:14:07 GMT -->
</html>
