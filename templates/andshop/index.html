<!DOCTYPE html>
<html lang="en" dir="ltr">


<!-- Mirrored from andit.co/projects/html/andshop/andshop-dashboard//vendor_dashboard by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 25 Feb 2023 08:13:36 GMT -->
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="Andshop - Admin Dashboard HTML Template.">

	<title>Andshop - Admin Dashboard HTML Template.</title>

	<!-- GOOGLE FONTS -->
	<link rel="preconnect" href="https://fonts.googleapis.com/">
	<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
	<link rel="preconnect" href="https://fonts.googleapis.com/">
	<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel="stylesheet">
	<link href="{{ url_for('static', filename='assets/css/materialdesignicons.min.css') }}" rel="stylesheet" />

	<!-- PLUGINS CSS STYLE -->
	<link href="{{ url_for('static', filename='assets/plugins/daterangepicker/daterangepicker.css') }}" rel="stylesheet">
	<link href="{{ url_for('static', filename='assets/plugins/simplebar/simplebar.css') }}" rel="stylesheet">

	<!-- custom css -->
	<link id="style.css" href="{{ url_for('static', filename='assets/css/style.css') }}" rel="stylesheet" />


	<!-- FAVICON -->
	<link rel="icon" href="{{ url_for('static', filename='images/favicon.png') }}" type="image/png">
	<script type="text/javascript">
		window.addEventListener('pageshow', function(event) {
			if (event.persisted) {
				// If the page is loaded from the cache, reload it
				window.location.reload();
			}
		});
	</script>
	
</head>


<body class="ec-header-fixed ec-sidebar-fixed ec-sidebar-light ec-header-light" id="body">

	<!--  WRAPPER  -->
	<div class="wrapper">
		
		<!-- LEFT MAIN SIDEBAR -->
		<div class="ec-left-sidebar ec-bg-sidebar">
			<div id="sidebar" class="sidebar ec-sidebar-footer">

				<div class="ec-brand">
					<a href="/vendor_dashboard">
						<img class="ec-brand-icon" src="assets/img/logo/favicon.png" alt="" />
						<span class="ec-brand-name text-truncate">ANDSHOP</span>
					</a>
				</div>
				<!-- begin sidebar scrollbar -->
				<div class="ec-navigation" data-simplebar>
					<!-- sidebar menu -->
					<ul class="nav sidebar-inner" id="sidebar-menu">
						<!-- Dashboard -->
						<li class="active">
							<a class="sidenav-item-link" href="/vendor_dashboard">
								<i class="mdi mdi-view-dashboard-outline"></i>
								<span class="nav-text">Dashboard</span>
							</a>
							<hr>
						</li>
						<!-- Users -->
						<li class="has-sub">
							<a class="sidenav-item-link" href="javascript:void(0)">
								<i class="mdi mdi-account-multiple-outline"></i>
								<span class="nav-text">Customers</span> <b class="caret"></b>
							</a>
							<div class="collapse">
								<ul class="sub-menu" id="users" data-parent="#sidebar-menu">

									<li class="">
										<a class="sidenav-item-link" href='/user-list'>
											<span class="nav-text">User List</span>
										</a>
									</li>
								</ul>
							</div>
							<hr>
						</li>
						<!-- Analytics -->
						<li class="has-sub">
							<a class="sidenav-item-link" href="javascript:void(0)">
								<i class="mdi mdi-chart-line"></i>
								<span class="nav-text">Analytics</span> <b class="caret"></b>
							</a>
							<div class="collapse">
								<ul class="sub-menu" id="analytics" data-parent="#sidebar-menu">
									<li class="">
										<a class="sidenav-item-link" href="/store-revenue">
											<span class="nav-text">Store Revenue</span>
										</a>
									</li>
								</ul>
							</div>
							<hr>
						</li>
						<!-- Products -->
						<li class="has-sub">
							<a class="sidenav-item-link" href="javascript:void(0)">
								<!-- <i class="mdi mdi-palette-advanced"></i> -->
								<i class="mdi mdi-package-variant-closed"></i>
								<span class="nav-text">Products</span> <b class="caret"></b>
							</a>
							<div class="collapse">
								<ul class="sub-menu" id="products" data-parent="#sidebar-menu">
									<li class="">
										<a class="sidenav-item-link" href="/product-add">
											<span class="nav-text">Add Product</span>
										</a>										
									</li>
									<li class="">
										<a class="sidenav-item-link" href="/products">
											<span class="nav-text">List Product</span>
										</a>
									</li>
									<li class="">
										<a class="sidenav-item-link" href="/lost-products">
											<span class="nav-text">Lost Products</span>
										</a>
									</li>
								</ul>
							</div>
						</li>

						<!-- Orders -->
						<li class="has-sub">
							<a class="sidenav-item-link" href="javascript:void(0)">
								<i class="mdi mdi-cart-outline"></i>
								<span class="nav-text">Orders</span> <b class="caret"></b>
							</a>
							<div class="collapse">
								<ul class="sub-menu" id="orders" data-parent="#sidebar-menu">
									<li class="">
										<a class="sidenav-item-link" href="/new-order">
											<span class="nav-text">Order list</span>
										</a>
									</li>
								</ul>
							</div>
						</li>
						<!-- Error page -->
						<li>
							<a class="sidenav-item-link" href="/analysis">
								<i class="mdi mdi-finance"></i>
								<span class="nav-text">Product Analysis page</span>
							</a>
						</li>
					</ul>
				</div>
			</div>
		</div>

		<!--  PAGE WRAPPER -->
		<div class="ec-page-wrapper">

			<!-- Header -->
			<header class="ec-main-header" id="header">
				<nav class="navbar navbar-static-top navbar-expand-lg">
					<!-- Sidebar toggle button -->
					<button id="sidebar-toggler">
						<img src="assets/img/icons/clops.png" alt="">
					</button>
					<!-- search form -->
					<div class="search-form d-lg-inline-block">
						<div class="input-group">
							<input type="text" name="query" id="search-input" class="form-control"
								placeholder="search.." autofocus autocomplete="off" />
							<button type="button" name="search" id="search-btn" class="btn btn-flat">
								<i class="mdi mdi-magnify"></i>
							</button>
						</div>
						<div id="search-results-container">
							<ul id="search-results"></ul>
						</div>
					</div>

					<!-- navbar right -->
					<div class="navbar-right">
						<ul class="nav navbar-nav">
							<!-- User Account -->
							<li class="dropdown user-menu">
								<button class="dropdown-toggle nav-link ec-drop" data-bs-toggle="dropdown"
									aria-expanded="false">
									<img src="static/{{ user_info.profile_pic }}" class="user-image" alt="User Image" />
								</button>
								<ul class="dropdown-menu dropdown-menu-right ec-dropdown-menu">
									<!-- User image -->
									<li class="dropdown-header">
										<div class="d-inline-block">
											<h5>{{ user_info.name }}</h5>
											<p class="pt-2">{{ user_info.email }}</p>
										</div>
									</li>
									<li>
										<a href='/user-profile'>
											<i class="mdi mdi-account"></i> My Profile
										</a>
									</li>
									<li class="dropdown-footer">
										<a href="/logout"> <i class="mdi mdi-logout"></i> Log Out </a>
									</li>
								</ul>
							</li>
							<li class="dropdown notifications-menu custom-dropdown">
								<button class="dropdown-toggle notify-toggler custom-dropdown-toggler">
									<i class="mdi mdi-bell-ring-outline"></i>
									<span class="badge badge-pill badge-primary">0</span>
								</button>

								<div class="card card-default dropdown-notify dropdown-menu-right mb-0">
									<div class="card-header card-header-border-bottom px-3">
										<h2>Notifications</h2>
										<div class="notification-counter"></div>
									</div>

									<div class="card-body px-0 py-0">
										<div class="tab-content" id="myNotifications">
											<ul class="list-unstyled notification-list" data-simplebar style="height: 360px; overflow-y: auto;">
												<!-- Notifications will be dynamically inserted here -->
											</ul>
											<div class="text-center p-2 border-top notification-footer">
												<a href="javascript:void(0)" class="mark-all-read">Mark all as read</a>
											</div>
										</div>
									</div>
								</div>

								<ul class="dropdown-menu dropdown-menu-right d-none">
									<li class="dropdown-header">You have 5 notifications</li>
									<li>
										<a href="#">
											<i class="mdi mdi-account-plus"></i> New user registered
											<span class=" font-size-12 d-inline-block float-right"><i
													class="mdi mdi-clock-outline"></i> 10 AM</span>
										</a>
									</li>
									<li>
										<a href="#">
											<i class="mdi mdi-account-remove"></i> User deleted
											<span class=" font-size-12 d-inline-block float-right"><i
													class="mdi mdi-clock-outline"></i> 07 AM</span>
										</a>
									</li>
									<li>
										<a href="#">
											<i class="mdi mdi-chart-areaspline"></i> Sales report is ready
											<span class=" font-size-12 d-inline-block float-right"><i
													class="mdi mdi-clock-outline"></i> 12 PM</span>
										</a>
									</li>
									<li>
										<a href="#">
											<i class="mdi mdi-account-supervisor"></i> New client
											<span class=" font-size-12 d-inline-block float-right"><i
													class="mdi mdi-clock-outline"></i> 10 AM</span>
										</a>
									</li>
									<li>
										<a href="#">
											<i class="mdi mdi-server-network-off"></i> Server overloaded
											<span class=" font-size-12 d-inline-block float-right"><i
													class="mdi mdi-clock-outline"></i> 05 AM</span>
										</a>
									</li>
									<li class="dropdown-footer">
										<a class="text-center" href="#"> View All </a>
									</li>
								</ul>
							</li>
						</ul>
					</div>
				</nav>
			</header>

			<!-- CONTENT WRAPPER -->
			<div class="ec-content-wrapper">
				<div class="content">
					<div class="row">
						<div class="col-12 p-b-15">
							<div class="welcome-message card card-default p-4">
								<h4>Welcome back, {{ user_info.name }}!</h4>
								<p class="text-muted">Here's what's happening with your store today.</p>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-xl-3 col-sm-6 p-b-15">
							<div class="card card-mini dash-card card-1">
								<div class="card-body">
									<h2 class="mb-1">{{ customer_count }}</h2>
									<p>Total Customers</p>
									<div class="chart-wrapper">
										<canvas id="customerChart"></canvas>
									</div>
									<span class="mdi mdi-account-multiple"></span>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-sm-6 p-b-15">
							<div class="card card-mini dash-card card-2">
								<div class="card-body">
									<h2 class="mb-1">{{ total_orders }}</h2>
									<p>Total Orders</p>
									<div class="chart-wrapper">
										<canvas id="orderChart"></canvas>
									</div>
									<span class="mdi mdi-shopping"></span>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-sm-6 p-b-15">
							<div class="card card-mini dash-card card-3">
								<div class="card-body">
									<h2 class="mb-1">₹{{ total_revenue }}</h2>
									<p>Total Revenue</p>
									<div class="chart-wrapper">
										<canvas id="revenueChart"></canvas>
									</div>
									<span class="mdi mdi-currency-inr"></span>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-sm-6 p-b-15">
							<div class="card card-mini dash-card card-4">
								<div class="card-body">
									<h2 class="mb-1">{{ product_count }}</h2>
									<p>Total Products</p>
									<div class="chart-wrapper">
										<canvas id="productChart"></canvas>
									</div>
									<span class="mdi mdi-package-variant"></span>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-xl-8 col-md-12 p-b-15">
							<!-- Sales Graph -->
							<div class="card card-default">
								<div class="card-header d-flex justify-content-between align-items-center">
									<h2>Monthly Sales Report</h2>
									<div class="d-flex gap-2">
										<select class="form-select" id="monthSelect" style="width: 140px;">
											<option value="all">All Months</option>
											<option value="1">January</option>
											<option value="2">February</option>
											<option value="3">March</option>
											<option value="4">April</option>
											<option value="5">May</option>
											<option value="6">June</option>
											<option value="7">July</option>
											<option value="8">August</option>
											<option value="9">September</option>
											<option value="10">October</option>
											<option value="11">November</option>
											<option value="12">December</option>
										</select>
										<select class="form-select" id="yearSelect" style="width: 100px;">
										</select>
									</div>
								</div>
								<div class="card-body">
									<canvas id="monthlySalesChart" style="height: 400px; width: 100%;"></canvas>
								</div>
							</div>
						</div>

						<div class="col-xl-4 col-md-12 p-b-15">
							<!-- Order Status Cards -->
							<div class="card card-default">
								<div class="card-header justify-content-center">
									<h2>Orders Overview</h2>
								</div>
								<div class="card-body pt-2">
									<div class="row">
										<div class="col-6 mb-3">
											<div class="card card-mini dash-card order-card-1">
												<div class="card-body">
													<h2 class="mb-1" id="ordered-count">0</h2>
													<p>Ordered</p>
													<div class="chart-wrapper">
														<canvas id="orderedChart"></canvas>
													</div>
													<span class="mdi mdi-cart-outline"></span>
												</div>
											</div>
										</div>
										<div class="col-6 mb-3">
											<div class="card card-mini dash-card order-card-2">
												<div class="card-body">
													<h2 class="mb-1" id="delivered-count">0</h2>
													<p>Delivered</p>
													<div class="chart-wrapper">
														<canvas id="deliveredChart"></canvas>
													</div>
													<span class="mdi mdi-truck-delivery"></span>
												</div>
											</div>
										</div>
										<div class="col-6">
											<div class="card card-mini dash-card order-card-3">
												<div class="card-body">
													<h2 class="mb-1" id="returned-count">0</h2>
													<p>Returned</p>
													<div class="chart-wrapper">
														<canvas id="returnedChart"></canvas>
													</div>
													<span class="mdi mdi-package-return"></span>
												</div>
											</div>
										</div>
										<div class="col-6">
											<div class="card card-mini dash-card order-card-4">
												<div class="card-body">
													<h2 class="mb-1" id="cancelled-count">0</h2>
													<p>Cancelled</p>
													<div class="chart-wrapper">
														<canvas id="cancelledChart"></canvas>
													</div>
													<span class="mdi mdi-cancel"></span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					

					

					<div class="row">
						<div class="col-12 p-b-15">
							<!-- Recent Order Table -->
							<div class="card card-table-border-none card-default recent-orders" id="recent-orders">
								<div class="card-header justify-content-between">
									<h2>Recent Orders</h2>
									<div >
										<span></span>
									</div>
								</div>
								<div class="card-body pt-0 pb-5">
									<table class="table card-table table-responsive table-responsive-large"
										style="width:100%">
										<thead>
											<tr>
												<th>Order ID</th>
												<th>Photo</th>
												<th>Product Name</th>
												<th class="d-none d-lg-table-cell">Units</th>
												<th class="d-none d-lg-table-cell">Order Date</th>
												
												<th>Status</th>
												<th></th>
											</tr>
										</thead>
										<tbody>
											{% for order in recent_orders %}
											<tr>
												<td>{{ order.order_id }}</td>
												<td>
													<a class="text-dark" href="#"><img class="vendor-thumb" src="{{ order.product_image }}" alt="product image" style="width: 45px; height: 45px;"></a>
												</td>
												<td>
													<a class="text-dark" href="#">{{ order.product_name }}</a>
												</td>
												<td class="d-none d-lg-table-cell">{{ order.quantity }} Unit</td>
												<td class="d-none d-lg-table-cell">{{ order.order_date }}</td>
												
												<td>
													<span class="badge badge-{{ 'success' if order.status == 'Completed' else 'warning' }}">{{ order.status }}</span>
												</td>
												
											</tr>
											{% endfor %}
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>

				</div> <!-- End Content -->
			</div> <!-- End Content Wrapper -->

			<!-- Footer -->
			<footer class="footer mt-auto">
				<div class="copyright bg-white">
					<p>
						Copyright © 2023. All right reserved.
					</p>
				</div>
			</footer>

		</div> <!-- End Page Wrapper -->
	</div> <!-- End Wrapper -->

	<!-- Common Javascript -->
	<script src="{{ url_for('static', filename='assets/plugins/jquery/jquery-3.5.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/plugins/simplebar/simplebar.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/plugins/jquery-zoom/jquery.zoom.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/plugins/slick/slick.min.js') }}"></script>

	<!-- Chart -->
	<script src="{{ url_for('static', filename='assets/plugins/charts/Chart.min.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/js/chart.js') }}"></script>

	<!-- Google map chart -->
	<script src="{{ url_for('static', filename='assets/plugins/charts/google-map-loader.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/plugins/charts/google-map.js') }}"></script>

	<!-- Date Range Picker -->
	<script src="{{ url_for('static', filename='assets/plugins/daterangepicker/moment.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/plugins/daterangepicker/daterangepicker.js') }}"></script>
	<script src="{{ url_for('static', filename='assets/js/date-range.js') }}"></script>
	<!-- custom js -->
	<script src="{{ url_for('static', filename='assets/js/custom.js') }}"></script>

	<style>
	.notification-list li {
		border-bottom: 1px solid #eee;
		transition: background-color 0.3s;
	}

	.notification-list li:hover {
		background-color: #f8f9fa;
	}

	.notification-list .media-message {
		padding: 15px;
	}

	.notification-list .title {
		color: #333;
		font-size: 14px;
		font-weight: 600;
		margin-bottom: 5px;
	}

	.notification-list .last-msg {
		color: #666;
		font-size: 13px;
		margin-bottom: 3px;
	}

	.notification-counter {
		position: absolute;
		right: 15px;
		top: 50%;
		transform: translateY(-50%);
		background: #ff4444;
		color: white;
		border-radius: 50%;
		padding: 2px 8px;
		font-size: 12px;
		display: none;
	}

	.notification-footer {
		background: #f8f9fa;
	}

	.notification-footer a {
		color: #3E80F6;
		font-size: 13px;
		text-decoration: none;
	}

	.notification-footer a:hover {
		text-decoration: underline;
	}

	.unread-notification {
		background-color: #f0f7ff;
	}

	.notification-badge {
		display: inline-block;
		padding: 2px 8px;
		border-radius: 12px;
		font-size: 11px;
		font-weight: 600;
		margin-left: 5px;
	}

	.badge-low-stock {
		background-color: #fff3cd;
		color: #856404;
	}

	.badge-critical {
		background-color: #f8d7da;
		color: #721c24;
	}

	.welcome-message {
		background: linear-gradient(135deg, #3E80F6 0%, #1a5ee4 100%);
		color: white;
		border: none;
		border-radius: 10px;
		margin-bottom: 25px;
	}

	.welcome-message p {
		color: rgba(255, 255, 255, 0.8);
		margin-bottom: 0;
	}

	.card-mini {
		position: relative;
		overflow: hidden;
	}

	.card-mini .mdi {
		position: absolute;
		right: 15px;
		bottom: 15px;
		font-size: 2.5rem;
		opacity: 0.2;
	}

	.card-mini .card-body {
		position: relative;
		z-index: 1;
	}

	.card-mini h2 {
		font-size: 1.8rem;
		font-weight: 700;
		margin-bottom: 5px;
		color: white;
	}

	.card-mini p {
		font-size: 0.9rem;
		color: rgba(255, 255, 255, 0.8);
		margin-bottom: 0;
	}

	.chart-wrapper {
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 50px;
		opacity: 0.2;
	}

	.card-1 {
		background: linear-gradient(45deg, #6a11cb, #2575fc);
	}

	.card-2 {
		background: linear-gradient(45deg, #f6d365, #fda085);
	}

	.card-3 {
		background: linear-gradient(45deg, #0ba360, #3cba92);
	}

	.card-4 {
		background: linear-gradient(45deg, #f77062, #fe5196);
	}

	.card-mini:hover {
		transform: translateY(-5px);
		box-shadow: 0 5px 15px rgba(0,0,0,0.1);
	}

	.card-mini:hover .chart-wrapper {
		opacity: 0.3;
	}

	.card-mini:hover .mdi {
		opacity: 0.3;
	}

	/* Enhance table styling */
	.table {
		background: white;
		border-radius: 10px;
		overflow: hidden;
	}

	.table thead th {
		background: #f8f9fa;
		border-bottom: 2px solid #dee2e6;
		font-weight: 600;
		text-transform: uppercase;
		font-size: 0.8rem;
		letter-spacing: 0.5px;
	}

	.table tbody tr:hover {
		background-color: #f8f9fa;
	}

	.vendor-thumb {
		border-radius: 8px;
		box-shadow: 0 2px 5px rgba(0,0,0,0.1);
	}

	/* Enhance chart containers */
	#monthlySalesChart, #polar {
		padding: 20px;
	}

	.card-default {
		border-radius: 10px;
		box-shadow: 0 2px 10px rgba(0,0,0,0.05);
	}

	.card-header {
		background: white;
		border-bottom: 1px solid #eee;
	}

	.card-header h2 {
		font-size: 1.2rem;
		font-weight: 600;
		margin-bottom: 0;
	}

	/* Order status cards styling */
	.order-card-1 {
		background: linear-gradient(45deg, #3E80F6, #5a94f7);
	}
	
	.order-card-2 {
		background: linear-gradient(45deg, #20D489, #4adfaa);
	}
	
	.order-card-3 {
		background: linear-gradient(45deg, #FFBA4B, #ffc970);
	}
	
	.order-card-4 {
		background: linear-gradient(45deg, #F85778, #fa798f);
	}
	
	.card-mini {
		position: relative;
		overflow: hidden;
		transition: all 0.3s ease;
		border-radius: 8px;
	}
	
	.card-mini .mdi {
		position: absolute;
		right: 15px;
		bottom: 15px;
		font-size: 2.5rem;
		opacity: 0.2;
	}
	
	.card-mini h2 {
		font-size: 1.8rem;
		font-weight: 700;
		margin-bottom: 5px;
		color: white;
	}
	
	.card-mini p {
		font-size: 0.9rem;
		color: rgba(255, 255, 255, 0.8);
		margin-bottom: 0;
	}
	
	.chart-wrapper {
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 50px;
		opacity: 0.2;
	}
	</style>

	<script>
	function fetchAndDisplayNotifications() {
		$.ajax({
			url: '/get-low-stock-notifications',
			method: 'GET',
			success: function(notifications) {
				var notificationList = $('.notification-list');
				notificationList.empty();
				
				if (notifications.length > 0) {
					$('.notification-counter').text(notifications.length).show();
				} else {
					$('.notification-counter').hide();
					notificationList.append(`
						<li class="text-center p-3">
							<p class="text-muted mb-0">No new notifications</p>
						</li>
					`);
					return;
				}
				
				notifications.forEach(function(notification, index) {
					var badgeClass = notification.critical ? 'badge-critical' : 'badge-low-stock';
					var notificationHtml = `
						<li class="unread-notification" data-notification-id="${index}">
							<a href="javascript:void(0)" class="media media-message media-notification">
								<div class="media-body d-flex justify-content-between">
									<div class="message-contents">
										<h4 class="title">
											${notification.product_name}
											<span class="notification-badge ${badgeClass}">
												${notification.critical ? 'Critical' : 'Low Stock'}
											</span>
										</h4>
										<p class="last-msg">${notification.message}</p>
										<p class="store-info">
											<i class="mdi mdi-store"></i> ${notification.store_name}
										</p>
										<span class="font-size-12 font-weight-medium text-secondary">
											<i class="mdi mdi-clock-outline"></i> Just now
										</span>
									</div>
								</div>
							</a>
						</li>
					`;
					notificationList.append(notificationHtml);
				});
				
				// Update notification count in badge
				$('.notify-toggler .badge').text(notifications.length);
			},
			error: function(error) {
				console.error('Error fetching notifications:', error);
				$('.notification-list').html(`
					<li class="text-center p-3">
						<p class="text-danger mb-0">Error loading notifications</p>
					</li>
				`);
			}
		});
	}

	$(document).ready(function() {
		fetchAndDisplayNotifications();
		
		// Refresh notifications every 5 minutes
		setInterval(fetchAndDisplayNotifications, 300000);
		
		// Handle mark as read functionality
		$('.mark-all-read').click(function() {
			$('.unread-notification').removeClass('unread-notification');
			$('.notification-counter').hide();
		});
		
		// Handle individual notification click
		$(document).on('click', '.media-notification', function() {
			$(this).closest('li').removeClass('unread-notification');
			updateUnreadCount();
		});
		
		function updateUnreadCount() {
			var unreadCount = $('.unread-notification').length;
			if (unreadCount > 0) {
				$('.notification-counter').text(unreadCount).show();
			} else {
				$('.notification-counter').hide();
			}
		}
	});
	</script>

	<script>
	document.addEventListener('DOMContentLoaded', function() {
		let salesChart = null;
		
		// Populate year select with last 5 years
		const yearSelect = document.getElementById('yearSelect');
		const currentYear = new Date().getFullYear();
		for (let year = currentYear; year >= currentYear - 4; year--) {
			const option = document.createElement('option');
			option.value = year;
			option.textContent = year;
			yearSelect.appendChild(option);
		}

		function createChart(data) {
			if (salesChart) {
				salesChart.destroy();
			}

			const ctx = document.getElementById('monthlySalesChart').getContext('2d');
			salesChart = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: data.labels,
					datasets: [{
						label: 'Monthly Sales',
						data: data.values,
						backgroundColor: 'rgba(62, 128, 246, 0.8)',
						borderColor: 'rgba(62, 128, 246, 1)',
						borderWidth: 1,
						borderRadius: 5,
						barThickness: 25
					}]
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					plugins: {
						legend: {
							display: false
						},
						tooltip: {
							backgroundColor: 'rgba(255, 255, 255, 0.9)',
							titleColor: '#000',
							bodyColor: '#000',
							borderColor: '#e0e6ed',
							borderWidth: 1,
							padding: 10,
							callbacks: {
								label: function(context) {
									return `Revenue: $${context.parsed.y.toLocaleString()}`;
								}
							}
						}
					},
					scales: {
						y: {
							beginAtZero: true,
							grid: {
								borderDash: [2, 2]
							},
							ticks: {
								callback: function(value) {
									if (value >= 1000) {
										return `$${value/1000}k`;
									}
									return `$${value}`;
								}
							}
						},
						x: {
							grid: {
								display: false
							}
						}
					}
				}
			});
		}

		function fetchSalesData() {
			const month = document.getElementById('monthSelect').value;
			const year = document.getElementById('yearSelect').value;
			
			fetch(`/get-monthly-sales?month=${month}&year=${year}`)
				.then(response => response.json())
				.then(data => {
					createChart(data);
				})
				.catch(error => console.error('Error loading sales data:', error));
		}

		// Event listeners for selects
		document.getElementById('monthSelect').addEventListener('change', fetchSalesData);
		document.getElementById('yearSelect').addEventListener('change', fetchSalesData);

		// Initial load
		fetchSalesData();
	});
	</script>

	<script>
	document.addEventListener('DOMContentLoaded', function() {
			fetch('/get-order-status-counts')
				.then(response => response.json())
				.then(data => {
					// Update the order status counts in the cards
					document.getElementById('ordered-count').textContent = data.ordered || 0;
					document.getElementById('delivered-count').textContent = data.delivered || 0;
					document.getElementById('returned-count').textContent = data.returned || 0;
					document.getElementById('cancelled-count').textContent = data.cancelled || 0;
					
					// Initialize order status mini charts
					initializeOrderStatusCharts();
				})
				.catch(error => console.error('Error loading order status data:', error));
	});
	
	function initializeOrderStatusCharts() {
		// Ordered Chart
		new Chart(document.getElementById('orderedChart'), {
			type: 'line',
			data: {
				labels: ['', '', '', '', ''],
				datasets: [{
					data: [5, 8, 12, 8, 10],
					borderColor: 'rgba(255,255,255,0.8)',
					borderWidth: 2,
					fill: false,
					pointRadius: 0
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: { display: false },
				scales: {
					xAxes: [{ display: false }],
					yAxes: [{ display: false }]
				}
			}
		});
		
		// Delivered Chart
		new Chart(document.getElementById('deliveredChart'), {
			type: 'line',
			data: {
				labels: ['', '', '', '', ''],
				datasets: [{
					data: [3, 6, 9, 12, 15],
					borderColor: 'rgba(255,255,255,0.8)',
					borderWidth: 2,
					fill: false,
					pointRadius: 0
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: { display: false },
				scales: {
					xAxes: [{ display: false }],
					yAxes: [{ display: false }]
				}
			}
		});
		
		// Returned Chart
		new Chart(document.getElementById('returnedChart'), {
			type: 'line',
			data: {
				labels: ['', '', '', '', ''],
				datasets: [{
					data: [2, 1, 3, 2, 4],
					borderColor: 'rgba(255,255,255,0.8)',
					borderWidth: 2,
					fill: false,
					pointRadius: 0
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: { display: false },
				scales: {
					xAxes: [{ display: false }],
					yAxes: [{ display: false }]
				}
			}
		});
		
		// Cancelled Chart
		new Chart(document.getElementById('cancelledChart'), {
			type: 'line',
			data: {
				labels: ['', '', '', '', ''],
				datasets: [{
					data: [1, 2, 0, 3, 1],
					borderColor: 'rgba(255,255,255,0.8)',
					borderWidth: 2,
					fill: false,
					pointRadius: 0
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: { display: false },
				scales: {
					xAxes: [{ display: false }],
					yAxes: [{ display: false }]
				}
			}
		});
	}
	</script>

	<script>
	function initializeCharts() {
		// Customer Chart
		new Chart(document.getElementById('customerChart'), {
			type: 'line',
			data: {
				labels: ['', '', '', '', ''],
				datasets: [{
					data: [10, 15, 8, 12, 20],
					borderColor: 'rgba(255,255,255,0.8)',
					borderWidth: 2,
					fill: false,
					pointRadius: 0
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: { display: false },
				scales: {
					xAxes: [{ display: false }],
					yAxes: [{ display: false }]
				}
			}
		});

		// Order Chart
		new Chart(document.getElementById('orderChart'), {
			type: 'line',
			data: {
				labels: ['', '', '', '', ''],
				datasets: [{
					data: [5, 10, 15, 12, 18],
					borderColor: 'rgba(255,255,255,0.8)',
					borderWidth: 2,
					fill: false,
					pointRadius: 0
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: { display: false },
				scales: {
					xAxes: [{ display: false }],
					yAxes: [{ display: false }]
				}
			}
		});

		// Revenue Chart
		new Chart(document.getElementById('revenueChart'), {
			type: 'line',
			data: {
				labels: ['', '', '', '', ''],
				datasets: [{
					data: [100, 200, 150, 300, 250],
					borderColor: 'rgba(255,255,255,0.8)',
					borderWidth: 2,
					fill: false,
					pointRadius: 0
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: { display: false },
				scales: {
					xAxes: [{ display: false }],
					yAxes: [{ display: false }]
				}
			}
		});

		// Product Chart
		new Chart(document.getElementById('productChart'), {
			type: 'line',
			data: {
				labels: ['', '', '', '', ''],
				datasets: [{
					data: [8, 12, 15, 10, 20],
					borderColor: 'rgba(255,255,255,0.8)',
					borderWidth: 2,
					fill: false,
					pointRadius: 0
				}]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: { display: false },
				scales: {
					xAxes: [{ display: false }],
					yAxes: [{ display: false }]
				}
			}
		});
	}

	$(document).ready(function() {
		initializeCharts();
	});
	</script>

</body>


<!-- Mirrored from andit.co/projects/html/andshop/andshop-dashboard//vendor_dashboard by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 25 Feb 2023 08:14:07 GMT -->
</html>
